var rrwebSnapshot=function(e){"use strict";var t;(t=e.NodeType||(e.NodeType={}))[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment";var r=1;function n(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).reduce(function(e,t){return e+(function(e){return"styleSheet"in e}(r=t)?n(r.styleSheet)||"":r.cssText);var r},""):null}catch(e){return null}}var a=/url\((?:'([^']*)'|"([^"]*)"|([^)]*))\)/gm,i=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,o=/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi;function l(e,t){return e.replace(a,function(e,r,n,a){var l,s=r||n||a;if(!s)return e;if(!i.test(s))return"url('"+s+"')";if(o.test(s))return"url("+s+")";if("/"===s[0])return"url('"+(((l=t).indexOf("//")>-1?l.split("/").slice(0,3).join("/"):l.split("/")[0]).split("?")[0]+s)+"')";var c=t.split("/"),f=s.split("/");c.pop();for(var u=0,p=f;u<p.length;u++){var d=p[u];"."!==d&&(".."===d?c.pop():c.push(d))}return"url('"+c.join("/")+"')"})}function s(e,t){var r=e.createElement("a");return r.href=t,r.href}function c(t,r,a,i){switch(t.nodeType){case t.DOCUMENT_NODE:return{type:e.NodeType.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:e.NodeType.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId};case t.ELEMENT_NODE:var o=!1;"string"==typeof a?o=t.classList.contains(a):t.classList.forEach(function(e){a.test(e)&&(o=!0)});for(var c=t.tagName.toLowerCase(),f={},u=0,p=Array.from(t.attributes);u<p.length;u++){var d=p[u],h=d.name,m=d.value;f[h]="src"===h||"href"===h?s(r,m):"style"===h?l(m,location.href):m}if("link"===c&&i){var y,g=Array.from(r.styleSheets).find(function(e){return e.href===t.href});(y=n(g))&&(delete f.rel,delete f.href,f._cssText=l(y,g.href))}if("style"===c&&t.sheet&&!t.innerText.trim().length)(y=n(t.sheet))&&(f._cssText=l(y,location.href));if("input"===c||"textarea"===c||"select"===c){m=t.value;"radio"!==f.type&&"checkbox"!==f.type&&m?f.value=m:t.checked&&(f.checked=t.checked)}if("option"===c){var v=t.parentElement;f.value===v.value&&(f.selected=t.selected)}if(o){var T=t.getBoundingClientRect(),N=T.width,C=T.height;f.rr_width=N+"px",f.rr_height=C+"px"}return{type:e.NodeType.Element,tagName:c,attributes:f,childNodes:[],isSVG:(E=t,"svg"===E.tagName||E instanceof SVGElement||void 0),needBlock:o};case t.TEXT_NODE:var x=t.parentNode&&t.parentNode.tagName,D=t.textContent,b="STYLE"===x||void 0;return b&&D&&(D=l(D,location.href)),"SCRIPT"===x&&(D="SCRIPT_PLACEHOLDER"),{type:e.NodeType.Text,textContent:D||"",isStyle:b};case t.CDATA_SECTION_NODE:return{type:e.NodeType.CDATA,textContent:""};case t.COMMENT_NODE:return{type:e.NodeType.Comment,textContent:t.textContent||""};default:return!1}var E}function f(t,n,a,i,o,l){void 0===o&&(o=!1),void 0===l&&(l=!0);var s,u=c(t,n,i,l);if(!u)return console.warn(t,"not serialized"),null;s="__sn"in t?t.__sn.id:r++;var p=Object.assign(u,{id:s});t.__sn=p,a[s]=t;var d=!o;if(p.type===e.NodeType.Element&&(d=d&&!p.needBlock,delete p.needBlock),(p.type===e.NodeType.Document||p.type===e.NodeType.Element)&&d)for(var h=0,m=Array.from(t.childNodes);h<m.length;h++){var y=f(m[h],n,a,i,o,l);y&&p.childNodes.push(y)}return p}var u={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var p=/([^\r\n,{}]+)(,(?=[^}]*{)|\s*{)/g,d=/([^\\]):hover/g;function h(e){return e.replace(p,function(e,t,r){if(d.test(t)){var n=t.replace(d,"$1.\\:hover");return t.replace(/\s*$/,"")+", "+n.replace(/^\s*/,"")+r}return e})}function m(t,r){switch(t.type){case e.NodeType.Document:return r.implementation.createDocument(null,"",null);case e.NodeType.DocumentType:return r.implementation.createDocumentType(t.name,t.publicId,t.systemId);case e.NodeType.Element:var n=function(e){var t=u[e.tagName]?u[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(t),a=void 0;for(var i in a=t.isSVG?r.createElementNS("http://www.w3.org/2000/svg",n):r.createElement(n),t.attributes)if(t.attributes.hasOwnProperty(i)&&!i.startsWith("rr_")){var o=t.attributes[i];o="boolean"==typeof o?"":o;var l="textarea"===n&&"value"===i,s="style"===n&&"_cssText"===i;if(s&&(o=h(o)),l||s){var c=r.createTextNode(o);a.appendChild(c);continue}if("iframe"===n&&"src"===i)continue;try{t.isSVG&&"xlink:href"===i?a.setAttributeNS("http://www.w3.org/1999/xlink",i,o):a.setAttribute(i,o)}catch(e){}}else t.attributes.rr_width&&(a.style.width=t.attributes.rr_width),t.attributes.rr_height&&(a.style.height=t.attributes.rr_height);return a;case e.NodeType.Text:return r.createTextNode(t.isStyle?h(t.textContent):t.textContent);case e.NodeType.CDATA:return r.createCDATASection(t.textContent);case e.NodeType.Comment:return r.createComment(t.textContent);default:return null}}function y(t,r,n,a){void 0===a&&(a=!1);var i=m(t,r);if(!i)return null;if(t.type===e.NodeType.Document&&(r.close(),r.open(),i=r),i.__sn=t,n[t.id]=i,(t.type===e.NodeType.Document||t.type===e.NodeType.Element)&&!a)for(var o=0,l=t.childNodes;o<l.length;o++){var s=l[o],c=y(s,r,n);c?i.appendChild(c):console.warn("Failed to rebuild",s)}return i}return e.snapshot=function(e,t,r){void 0===t&&(t="rr-block"),void 0===r&&(r=!0);var n={};return[f(e,e,n,t,!1,r),n]},e.serializeNodeWithId=f,e.rebuild=function(e,t){var r={};return[y(e,t,r),r]},e.buildNodeWithSN=y,e}({});
//# sourceMappingURL=rrweb-snapshot.min.js.map
